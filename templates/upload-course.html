{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload Course | EduStream</title>
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
  <link rel="stylesheet" href="{% static 'css/upload-course.css' %}">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <div class="logo">
        <h1>EduStream</h1>
      </div>
      <nav class="main-nav">
        <ul>
          <li><a href="{% url "index" %}">Home</a></li>
          <li><a href="{% url "courses" %}">Courses</a></li>
          <li><a href="about.html">About</a></li>
        </ul>
      </nav>
      <div class="nav-actions">
        <div class="user-menu" id="user-menu">
          <button class="user-menu-toggle" id="user-menu-toggle">
            <span class="user-initial">J</span>
          </button>
          <div class="dropdown-menu">
            <a href="{% url "dashboard" %}">Dashboard</a>
            <a href="{% url "profile" %}">Profile</a>
            <a href="{% url "auth:logout" %}" id="logout-btn">Logout</a>
          </div>
        </div>
      </div>
      <button class="menu-toggle" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </header>

  <section class="page-header">
    <div class="container">
      <h1>Upload New Course</h1>
      <p>Share your knowledge and expertise with our community</p>
    </div>
  </section>

  <section class="upload-section">
    <div class="container">
      <form id="upload-course-form" class="upload-form">
        <div class="form-sidebar">
          <div class="progress-container">
            <div class="progress-label">
              <span>Course Progress</span>
              <span id="progress-percentage">0%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-filled" id="progress-bar" style="width: 0%;"></div>
            </div>
          </div>
          
          <ul class="form-nav">
            <li>
              <a href="#course-details" class="active" data-section="course-details">
                <span class="step-number">1</span>
                <span class="step-label">Course Details</span>
              </a>
            </li>
            <li>
              <a href="#course-content" data-section="course-content">
                <span class="step-number">2</span>
                <span class="step-label">Course Content</span>
              </a>
            </li>
            <li>
              <a href="#course-roadmap" data-section="course-roadmap">
                <span class="step-number">3</span>
                <span class="step-label">Course Roadmap</span>
              </a>
            </li>
            <li>
              <a href="#preview-submit" data-section="preview-submit">
                <span class="step-number">4</span>
                <span class="step-label">Preview & Submit</span>
              </a>
            </li>
          </ul>
          
          <div class="form-actions">
            <button type="button" id="save-draft" class="btn btn-secondary">Save Draft</button>
            <div class="form-tip">
              <p>Need help? <a href="instructor-guide.html">Read our instructor guide</a></p>
            </div>
          </div>
        </div>
        
        <div class="form-main">
          <div class="form-section active" id="course-details">
            <h2>Course Details</h2>
            
            <div class="form-group">
              <label for="course-title">Course Title *</label>
              <input type="text" id="course-title" placeholder="e.g., Web Development Fundamentals" required>
              <p class="form-hint">Make it clear and compelling (max 60 characters)</p>
            </div>
            
            <div class="form-group">
              <label for="course-description">Course Description *</label>
              <textarea id="course-description" placeholder="Provide a detailed description of your course..." rows="6" required></textarea>
              <p class="form-hint">Explain what students will learn and why it matters (250-1000 characters)</p>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="course-category">Category *</label>
                <select id="course-category" required>
                  <option value="">Select a category</option>
                  <option value="development">Development</option>
                  <option value="design">Design</option>
                  <option value="business">Business</option>
                  <option value="marketing">Marketing</option>
                  <option value="personal">Personal Development</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="course-level">Level *</label>
                <select id="course-level" required>
                  <option value="">Select a level</option>
                  <option value="beginner">Beginner</option>
                  <option value="intermediate">Intermediate</option>
                  <option value="advanced">Advanced</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="course-thumbnail">Course Thumbnail *</label>
              <div class="file-upload">
                <div class="file-preview" id="thumbnail-preview">
                  <div class="upload-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M17 8L12 3L7 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M12 3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </div>
                </div>
                <input type="file" id="course-thumbnail" accept="image/*" class="file-input">
                <label for="course-thumbnail" class="file-label">Choose Image</label>
              </div>
              <p class="form-hint">Use a 16:9 ratio image (min 1280x720px) that represents your course</p>
            </div>

            <div class="form-group">
              <label for="course-tags">Tags</label>
              <input type="text" id="course-tags" placeholder="e.g., javascript, web development, coding">
              <p class="form-hint">Add keywords to help students find your course (separate with commas)</p>
            </div>
            
            <div class="form-group">
              <label for="course-prerequisites">Prerequisites</label>
              <textarea id="course-prerequisites" placeholder="Any prior knowledge or skills needed..." rows="3"></textarea>
              <p class="form-hint">List any knowledge or tools students should have before starting</p>
            </div>
            
            <div class="nav-buttons">
              <button type="button" class="btn btn-primary next-section" data-target="course-content">Continue to Course Content</button>
            </div>
          </div>
          
          <div class="form-section" id="course-content">
            <h2>Course Content</h2>
            
            <div id="sections-container">
              <div class="course-section" data-section-id="1">
                <div class="section-header">
                  <h3>Section 1</h3>
                  <button type="button" class="btn-icon remove-section" title="Remove section">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </button>
                </div>
                
                <div class="form-group">
                  <label for="section-title-1">Section Title *</label>
                  <input type="text" id="section-title-1" class="section-title" placeholder="e.g., Introduction to HTML" required>
                </div>
                
                <div class="lessons-container" data-section-id="1">
                  <h4>Lessons</h4>
                  
                  <div class="lesson-item" data-lesson-id="1-1">
                    <div class="lesson-header">
                      <h5>Lesson 1</h5>
                      <button type="button" class="btn-icon remove-lesson" title="Remove lesson">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                      </button>
                    </div>
                    
                    <div class="form-group">
                      <label for="lesson-title-1-1">Lesson Title *</label>
                      <input type="text" id="lesson-title-1-1" class="lesson-title" placeholder="e.g., HTML Document Structure" required>
                    </div>
                    
                    <div class="form-group">
                      <label for="lesson-video-1-1">Video *</label>
                      <div class="file-upload">
                        <div class="file-preview video-preview" id="video-preview-1-1">
                          <div class="upload-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M17 8L12 3L7 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M12 3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                          </div>
                        </div>
                        <input type="file" id="lesson-video-1-1" class="file-input lesson-video" accept="video/*">
                        <label for="lesson-video-1-1" class="file-label">Choose Video</label>
                      </div>
                      <p class="form-hint">MP4 format recommended, max 2GB</p>
                    </div>
                    
                    <div class="form-group">
                      <label for="lesson-content-1-1">Lesson Content *</label>
                      <textarea id="lesson-content-1-1" class="lesson-content" placeholder="Add text, code examples, and other content for this lesson..." rows="6" required></textarea>
                    </div>
                  </div>
                  
                  <button type="button" class="btn btn-text add-lesson" data-section-id="1">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Add Lesson
                  </button>
                </div>
              </div>
            </div>
            
            <button type="button" class="btn btn-secondary add-section" id="add-section">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Add New Section
            </button>
            
            <div class="nav-buttons">
              <button type="button" class="btn btn-secondary prev-section" data-target="course-details">Back</button>
              <button type="button" class="btn btn-primary next-section" data-target="course-roadmap">Continue to Course Roadmap</button>
            </div>
          </div>
          
          <div class="form-section" id="course-roadmap">
            <h2>Course Roadmap</h2>
            <p class="section-intro">Create a visual roadmap of your course to help students understand the learning path.</p>
            
            <div class="form-group">
              <label for="roadmap-intro">Roadmap Introduction</label>
              <textarea id="roadmap-intro" placeholder="Brief explanation of the course journey..." rows="3"></textarea>
              <p class="form-hint">Set expectations and explain what students will achieve</p>
            </div>
            
            <div class="roadmap-builder">
              <h3>Course Milestones</h3>
              <p>Add key milestones that students will reach throughout the course</p>
              
              <div id="milestones-container">
                <div class="milestone-item" data-milestone-id="1">
                  <div class="milestone-header">
                    <span class="milestone-number">1</span>
                    <button type="button" class="btn-icon remove-milestone" title="Remove milestone">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </button>
                  </div>
                  
                  <div class="form-group">
                    <label for="milestone-title-1">Milestone Title *</label>
                    <input type="text" id="milestone-title-1" class="milestone-title" placeholder="e.g., Building Your First Webpage" required>
                  </div>
                  
                  <div class="form-group">
                    <label for="milestone-description-1">Description</label>
                    <textarea id="milestone-description-1" class="milestone-description" placeholder="What will students achieve at this milestone?" rows="3"></textarea>
                  </div>
                  
                  <div class="form-group">
                    <label for="milestone-sections-1">Associated Sections</label>
                    <select id="milestone-sections-1" class="milestone-sections" multiple>
                      <!-- Options will be populated via JavaScript based on created sections -->
                      <option value="section-1">Section 1</option>
                    </select>
                    <p class="form-hint">Select the sections that contribute to reaching this milestone</p>
                  </div>
                </div>
              </div>
              
              <button type="button" class="btn btn-secondary add-milestone" id="add-milestone">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Add Milestone
              </button>
            </div>
            
            <div class="roadmap-preview">
              <h3>Roadmap Preview</h3>
              <div class="roadmap-visualization" id="roadmap-viz">
                <!-- This will show a visual representation of the roadmap -->
                <div class="roadmap-placeholder">
                  <p>Your roadmap will appear here as you add milestones.</p>
                </div>
              </div>
            </div>
            
            <div class="nav-buttons">
              <button type="button" class="btn btn-secondary prev-section" data-target="course-content">Back</button>
              <button type="button" class="btn btn-primary next-section" data-target="preview-submit">Continue to Preview & Submit</button>
            </div>
          </div>
          
          <div class="form-section" id="preview-submit">
            <h2>Preview & Submit</h2>
            <p class="section-intro">Review your course details before submitting.</p>
            
            <div class="course-preview" id="course-preview">
              <div class="preview-placeholder">
                <div class="spinner"></div>
                <p>Loading preview...</p>
              </div>
            </div>
            
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="terms-agreement" required>
                <span>I confirm that all content is original or I have permission to use it.</span>
              </label>
            </div>
            
            <div class="nav-buttons">
              <button type="button" class="btn btn-secondary prev-section" data-target="course-roadmap">Back</button>
              <button type="submit" class="btn btn-primary" id="submit-course">Submit Course</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </section>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-column">
          <h3>EduStream</h3>
          <p>Premium online learning platform with expert-led courses and clear learning paths.</p>
        </div>
        <div class="footer-column">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="{% url "index" %}">Home</a></li>
            <li><a href="{% url "courses" %}">Courses</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>Legal</h4>
          <ul>
            <li><a href="terms.html">Terms of Service</a></li>
            <li><a href="privacy.html">Privacy Policy</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h4>Connect</h4>
          <div class="social-links">
            <a href="#" aria-label="Facebook">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 2H15C13.6739 2 12.4021 2.52678 11.4645 3.46447C10.5268 4.40215 10 5.67392 10 7V10H7V14H10V22H14V14H17L18 10H14V7C14 6.73478 14.1054 6.48043 14.2929 6.29289C14.4804 6.10536 14.7348 6 15 6H18V2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
            <a href="#" aria-label="Twitter">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M23 3C22.1 3.6 21.1 4.1 20 4.4C19.1 3.4 17.8 2.8 16.5 2.8C13.9 2.8 11.9 4.8 11.9 7.4C11.9 7.8 11.9 8.2 12 8.6C8 8.4 4.7 6.6 2.5 4C2 4.8 1.8 5.7 1.8 6.6C1.8 8.3 2.7 9.8 4 10.7C3.2 10.7 2.4 10.5 1.8 10.1V10.2C1.8 12.5 3.3 14.4 5.4 14.9C5 15 4.5 15.1 4 15.1C3.7 15.1 3.4 15.1 3.1 15C3.7 16.9 5.4 18.2 7.5 18.3C5.9 19.5 3.8 20.2 1.5 20.2C1 20.2 0.5 20.2 0 20.1C2.1 21.4 4.6 22.1 7.2 22.1C16.4 22.1 21.3 14.2 21.3 7.4C21.3 7.2 21.3 7 21.3 6.8C22.2 6.1 23 5.2 23.6 4.2L23 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
            <a href="#" aria-label="Instagram">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="2" y="2" width="20" height="20" rx="5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M16 11.37C16.1234 12.2022 15.9813 13.0522 15.5938 13.799C15.2063 14.5458 14.5932 15.1514 13.8416 15.5297C13.0901 15.9079 12.2385 16.0396 11.4078 15.9059C10.5771 15.7723 9.80977 15.3801 9.21485 14.7852C8.61993 14.1902 8.22774 13.4229 8.09408 12.5922C7.96042 11.7615 8.09208 10.9099 8.47034 10.1584C8.8486 9.40685 9.4542 8.79374 10.201 8.40624C10.9478 8.01874 11.7978 7.87659 12.63 8C13.4789 8.12588 14.2649 8.52146 14.8717 9.12831C15.4785 9.73515 15.8741 10.5211 16 11.37Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="16.5" cy="7.5" r="1.5" fill="currentColor"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
      <div class="copyright">
        <p>&copy; 2025 EduStream. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="{% static 'js/app.js' %}"></script>
  <script src="{% static 'js/upload-course.js' %}"></script>
</body>
</html>